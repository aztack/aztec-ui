const $path = require('path');
const {walk, camelize } = require('./utils');

const _ = console.log;

const __ = iconFiles = [];
walk($path.resolve(__dirname, '../src/components/icons/builtin'), (filename) => {
  if (filename === 'index.tsx') return;
  iconFiles.push(filename.replace('.tsx', ''));
});
iconFiles.sort();
__._ = __.forEach

// output
_(`//Auto Generated by 'npm run gen-icon-index'
import { exportToGlobal } from '../../../utils';
import { AzIcon } from '../az-icon';
`);
__._(name => {
  _(`import ${camelize(name)} from './${name}';`)
});
_(`const builtinIcons: Record<string, string | string[]> = {`)
__._(name => {
_(`  "${name}": ${camelize(name)},`);
});
_(`};
export default builtinIcons;
exportToGlobal('icons', {
  get() {
    return Object.keys(AzIcon.icons);
  }
})
// for Demo
/*`);
__._(name => {
_(`  <az-icon icon="${name}" title="${name}" hover-effect="border"></az-icon>`)
});
_('*/');
